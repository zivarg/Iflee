<button nz-button nzType="primary" [disabled]="loading" (click)="showItemModal()">Добавить новый самолет</button>
<button nz-button nzType="default" [disabled]="loading" (click)="fetch()">Обновить</button>
<nz-table
  #ajaxTable
  nzShowSizeChanger
  [nzFrontPagination]="false"
  [nzData]="listOfData"
  [nzLoading]="loading"
  [nzTotal]="total"
  [(nzPageIndex)]="pageIndex"
  [(nzPageSize)]="pageSize"
  (nzPageIndexChange)="fetch()"
  (nzPageSizeChange)="fetch(true)"
>
  <thead>
    <tr>
      <th>Бортовой номер</th>
      <th>Марка</th>
      <th>Модель</th>
      <th>Тип</th>
      <th>Действие</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let data of ajaxTable.data">
      <td>{{ data.boardNumber }}</td>
      <td>{{ data.mark }}</td>
      <td>{{ data.model }}</td>
      <td>{{ data.type }}</td>
      <td>
        <button nz-button nzType="default" (click)="showItemModal(data.id)">Редактировать</button>
        <a nz-popconfirm
           nzTitle="Вы уверены, что хотите удалить?"
           nzOkText="Да"
           nzCancelText="Нет" (nzOnConfirm)="delete(data.id)"
        >
          <button nz-button nzType="danger">Удалить</button>
        </a>
      </td>
    </tr>
  </tbody>
</nz-table>
<nz-modal [(nzVisible)]="isVisibleItemModal"
          [nzClosable]=false
          [nzTitle]="editId !==-1 ? 'Редактирование самолета':'Добавление нового самолета'"
          (nzOnCancel)="itemModalCancel()"
          (nzOnOk)="itemModalOk()"
          [nzOkDisabled]=!isItemModalDataValid()
>
  <form nz-form [formGroup]="itemForm">
    <nz-form-item>
      <nz-form-label>Бортовой номер</nz-form-label>
      <nz-form-control [nzValidateStatus]="itemForm.get('boardNumber')?.dirty
          && !itemForm.get('boardNumber')?.errors && isItemModalBoardNumberExists ? 'error': ''">
        <input nz-input formControlName="boardNumber" placeholder="Введите бортовой номер" />
        <nz-form-explain
          *ngIf="itemForm.get('boardNumber')?.dirty
          && itemForm.get('boardNumber')?.errors && !isItemModalBoardNumberExists"
        >
          Введите корректный бортовой номер!
        </nz-form-explain>
        <nz-form-explain
          *ngIf="itemForm.get('boardNumber')?.dirty
          && !itemForm.get('boardNumber')?.errors && isItemModalBoardNumberExists"
        >
          Введенный бортовой номер уже существует!
        </nz-form-explain>
      </nz-form-control>
      <nz-spin nzSimple [nzSpinning]="isItemModalBoardNumberValidation"></nz-spin>
    </nz-form-item>
  </form>
</nz-modal>
